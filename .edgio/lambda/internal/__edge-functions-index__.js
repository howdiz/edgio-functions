"use strict";var We=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var ct=We((sr,at)=>{"use strict";var kt=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Nt=kt(()=>{}),Oe=typeof Map=="function"&&Map.prototype,me=Object.getOwnPropertyDescriptor&&Oe?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,fe=Oe&&me&&typeof me.get=="function"?me.get:null,Be=Oe&&Map.prototype.forEach,ke=typeof Set=="function"&&Set.prototype,we=Object.getOwnPropertyDescriptor&&ke?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,he=ke&&we&&typeof we.get=="function"?we.get:null,Ue=ke&&Set.prototype.forEach,jt=typeof WeakMap=="function"&&WeakMap.prototype,te=jt?WeakMap.prototype.has:null,qt=typeof WeakSet=="function"&&WeakSet.prototype,re=qt?WeakSet.prototype.has:null,Ft=typeof WeakRef=="function"&&WeakRef.prototype,Ge=Ft?WeakRef.prototype.deref:null,$t=Boolean.prototype.valueOf,xt=Object.prototype.toString,Dt=Function.prototype.toString,Mt=String.prototype.match,Ne=String.prototype.slice,$=String.prototype.replace,Ct=String.prototype.toUpperCase,He=String.prototype.toLowerCase,tt=RegExp.prototype.test,Je=Array.prototype.concat,I=Array.prototype.join,Pt=Array.prototype.slice,ze=Math.floor,Te=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Se=Object.getOwnPropertySymbols,Re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,H=typeof Symbol=="function"&&typeof Symbol.iterator=="object",w=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===H?"object":"symbol")?Symbol.toStringTag:null,rt=Object.prototype.propertyIsEnumerable,Ke=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Ye(e,r){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||tt.call(/e/,r))return r;var l=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var u=e<0?-ze(-e):ze(e);if(u!==e){var g=String(u),c=Ne.call(r,g.length+1);return $.call(g,l,"$&_")+"."+$.call($.call(c,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $.call(r,l,"$&_")}var ve=Nt(),Xe=ve.custom,Qe=ot(Xe)?Xe:null;at.exports=function e(r,l,u,g){var c=l||{};if(F(c,"quoteStyle")&&c.quoteStyle!=="single"&&c.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(F(c,"maxStringLength")&&(typeof c.maxStringLength=="number"?c.maxStringLength<0&&c.maxStringLength!==1/0:c.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var v=F(c,"customInspect")?c.customInspect:!0;if(typeof v!="boolean"&&v!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(F(c,"indent")&&c.indent!==null&&c.indent!=="	"&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(F(c,"numericSeparator")&&typeof c.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var O=c.numericSeparator;if(typeof r>"u")return"undefined";if(r===null)return"null";if(typeof r=="boolean")return r?"true":"false";if(typeof r=="string")return it(r,c);if(typeof r=="number"){if(r===0)return 1/0/r>0?"0":"-0";var S=String(r);return O?Ye(r,S):S}if(typeof r=="bigint"){var A=String(r)+"n";return O?Ye(r,A):A}var J=typeof c.depth>"u"?5:c.depth;if(typeof u>"u"&&(u=0),u>=J&&J>0&&typeof r=="object")return Ae(r)?"[Array]":"[Object]";var j=nr(c,u);if(typeof g>"u")g=[];else if(st(g,r)>=0)return"[Circular]";function b(h,k,N){if(k&&(g=Pt.call(g),g.push(k)),N){var Y={depth:c.depth};return F(c,"quoteStyle")&&(Y.quoteStyle=c.quoteStyle),e(h,Y,u+1,g)}return e(h,c,u+1,g)}if(typeof r=="function"&&!Ze(r)){var de=zt(r),pe=ue(r,b);return"[Function"+(de?": "+de:" (anonymous)")+"]"+(pe.length>0?" { "+I.call(pe,", ")+" }":"")}if(ot(r)){var ge=H?$.call(String(r),/^(Symbol\(.*\))_[^)]*$/,"$1"):Re.call(r);return typeof r=="object"&&!H?ee(ge):ge}if(er(r)){for(var P="<"+He.call(String(r.nodeName)),L=r.attributes||[],E=0;E<L.length;E++)P+=" "+L[E].name+"="+nt(Lt(L[E].value),"double",c);return P+=">",r.childNodes&&r.childNodes.length&&(P+="..."),P+="</"+He.call(String(r.nodeName))+">",P}if(Ae(r)){if(r.length===0)return"[]";var T=ue(r,b);return j&&!rr(T)?"["+Ie(T,j)+"]":"[ "+I.call(T,", ")+" ]"}if(Wt(r)){var V=ue(r,b);return!("cause"in Error.prototype)&&"cause"in r&&!rt.call(r,"cause")?"{ ["+String(r)+"] "+I.call(Je.call("[cause]: "+b(r.cause),V),", ")+" }":V.length===0?"["+String(r)+"]":"{ ["+String(r)+"] "+I.call(V,", ")+" }"}if(typeof r=="object"&&v){if(Qe&&typeof r[Qe]=="function"&&ve)return ve(r,{depth:J-u});if(v!=="symbol"&&typeof r.inspect=="function")return r.inspect()}if(Kt(r)){var z=[];return Be&&Be.call(r,function(h,k){z.push(b(k,r,!0)+" => "+b(h,r))}),et("Map",fe.call(r),z,j)}if(Qt(r)){var i=[];return Ue&&Ue.call(r,function(h){i.push(b(h,r))}),et("Set",he.call(r),i,j)}if(Yt(r))return Ee("WeakMap");if(Zt(r))return Ee("WeakSet");if(Xt(r))return Ee("WeakRef");if(Ut(r))return ee(b(Number(r)));if(Ht(r))return ee(b(Te.call(r)));if(Gt(r))return ee($t.call(r));if(Bt(r))return ee(b(String(r)));if(!Vt(r)&&!Ze(r)){var W=ue(r,b),B=Ke?Ke(r)===Object.prototype:r instanceof Object||r.constructor===Object,U=r instanceof Object?"":"null prototype",K=!B&&w&&Object(r)===r&&w in r?Ne.call(x(r),8,-1):U?"Object":"",ne=B||typeof r.constructor!="function"?"":r.constructor.name?r.constructor.name+" ":"",D=ne+(K||U?"["+I.call(Je.call([],K||[],U||[]),": ")+"] ":"");return W.length===0?D+"{}":j?D+"{"+Ie(W,j)+"}":D+"{ "+I.call(W,", ")+" }"}return String(r)};function nt(e,r,l){var u=(l.quoteStyle||r)==="double"?'"':"'";return u+e+u}function Lt(e){return $.call(String(e),/"/g,"&quot;")}function Ae(e){return x(e)==="[object Array]"&&(!w||!(typeof e=="object"&&w in e))}function Vt(e){return x(e)==="[object Date]"&&(!w||!(typeof e=="object"&&w in e))}function Ze(e){return x(e)==="[object RegExp]"&&(!w||!(typeof e=="object"&&w in e))}function Wt(e){return x(e)==="[object Error]"&&(!w||!(typeof e=="object"&&w in e))}function Bt(e){return x(e)==="[object String]"&&(!w||!(typeof e=="object"&&w in e))}function Ut(e){return x(e)==="[object Number]"&&(!w||!(typeof e=="object"&&w in e))}function Gt(e){return x(e)==="[object Boolean]"&&(!w||!(typeof e=="object"&&w in e))}function ot(e){if(H)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Re)return!1;try{return Re.call(e),!0}catch{}return!1}function Ht(e){if(!e||typeof e!="object"||!Te)return!1;try{return Te.call(e),!0}catch{}return!1}var Jt=Object.prototype.hasOwnProperty||function(e){return e in this};function F(e,r){return Jt.call(e,r)}function x(e){return xt.call(e)}function zt(e){if(e.name)return e.name;var r=Mt.call(Dt.call(e),/^function\s*([\w$]+)/);return r?r[1]:null}function st(e,r){if(e.indexOf)return e.indexOf(r);for(var l=0,u=e.length;l<u;l++)if(e[l]===r)return l;return-1}function Kt(e){if(!fe||!e||typeof e!="object")return!1;try{fe.call(e);try{he.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function Yt(e){if(!te||!e||typeof e!="object")return!1;try{te.call(e,te);try{re.call(e,re)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function Xt(e){if(!Ge||!e||typeof e!="object")return!1;try{return Ge.call(e),!0}catch{}return!1}function Qt(e){if(!he||!e||typeof e!="object")return!1;try{he.call(e);try{fe.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function Zt(e){if(!re||!e||typeof e!="object")return!1;try{re.call(e,re);try{te.call(e,te)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function er(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function it(e,r){if(e.length>r.maxStringLength){var l=e.length-r.maxStringLength,u="... "+l+" more character"+(l>1?"s":"");return it(Ne.call(e,0,r.maxStringLength),r)+u}var g=$.call($.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,tr);return nt(g,"single",r)}function tr(e){var r=e.charCodeAt(0),l={8:"b",9:"t",10:"n",12:"f",13:"r"}[r];return l?"\\"+l:"\\x"+(r<16?"0":"")+Ct.call(r.toString(16))}function ee(e){return"Object("+e+")"}function Ee(e){return e+" { ? }"}function et(e,r,l,u){var g=u?Ie(l,u):I.call(l,", ");return e+" ("+r+") {"+g+"}"}function rr(e){for(var r=0;r<e.length;r++)if(st(e[r],`
`)>=0)return!1;return!0}function nr(e,r){var l;if(e.indent==="	")l="	";else if(typeof e.indent=="number"&&e.indent>0)l=I.call(Array(e.indent+1)," ");else return null;return{base:l,prev:I.call(Array(r+1),l)}}function Ie(e,r){if(e.length===0)return"";var l=`
`+r.prev+r.base;return l+I.call(e,","+l)+`
`+r.prev}function ue(e,r){var l=Ae(e),u=[];if(l){u.length=e.length;for(var g=0;g<e.length;g++)u[g]=F(e,g)?r(e[g],e):""}var c=typeof Se=="function"?Se(e):[],v;if(H){v={};for(var O=0;O<c.length;O++)v["$"+c[O]]=c[O]}for(var S in e)!F(e,S)||l&&String(Number(S))===S&&S<e.length||H&&v["$"+S]instanceof Symbol||(tt.call(/[^\w$]/,S)?u.push(r(S,e)+": "+r(e[S],e)):u.push(S+": "+r(e[S],e)));if(typeof Se=="function")for(var A=0;A<c.length;A++)rt.call(e,c[A])&&u.push("["+r(c[A])+"]: "+r(e[c[A]],e));return u}});var ut=We((lr,lt)=>{"use strict";lt.exports=function({host:e,utility:r},l,u){let v="edgio-config",O="edgio-origins",S="edgio-usrvar",A="edgio-geo",J="edgio-wurfl",j="edgio-virt",b="utf-8",L=Symbol("append-fn"),E=Symbol("body-defined"),T=Symbol("body-used"),V=Symbol("check-fn"),z=Symbol("done"),i=Symbol("edgio-id"),W=Symbol("encoding"),B=Symbol("error-code"),U=Symbol("get-body"),K=Symbol("get-fn"),ne=Symbol("keys-fn"),D=Symbol("namespace"),h=Symbol("options"),k=Symbol("edgio-origins"),N=Symbol("redirected"),Y=Symbol("remove-fn"),M=Symbol("req-resp-headers"),je=Symbol("set-fn"),q=Symbol("url"),y="Internal Error: ",qe=ct(),oe=0,Fe=2,ft=()=>" ".repeat(oe);function ht(n,...t){if(n(ft()),t.length>0){let o=t[0];typeof o=="string"&&(t.shift(),o=o.replace(/%[oOdisf]/g,s=>{if(t.length===0)return s;let a=t.shift();switch(s){case"%o":case"%O":return qe(a);case"%d":case"%i":return parseInt(a,10).toString();case"%s":return a.toString();case"%f":return parseFloat(a).toString();default:return s}}),t.unshift(o))}for(let o=0;o<t.length;o++){o!==0&&n(" ");let s=t[o],a=typeof s;switch(a){case"string":n(s);break;case"number":case"function":n(s.toString());break;case"boolean":n(s?"true":"false");break;case"undefined":n(a);break;default:n(s===null?"null":qe(s));break}}n(`
`)}function C(n,...t){let o=r.stream_write_all.bind(this,n);try{return ht(o,...t)}catch(s){o("Exception during console output: "),o(s.toString()),o(`
`)}}let se=new Map;globalThis.console={assert:function(n,...t){n||C(2,"Assertion failed:",...t)},clear:function(){},count:function(n){se.set(n,(se.get(n)||0)+1),globalThis.console.log(`${n}: ${se.get(n)}`)},countReset:function(n){se.set(n,0)},debug:C.bind(globalThis.console,1),dir:function(...n){return globalThis.console.log(...n)},dirxml:function(...n){return globalThis.console.log(...n)},error:C.bind(globalThis.console,2),group:function(...n){n!==void 0&&globalThis.console.log(...n),oe+=Fe},groupCollapsed:function(...n){return globalThis.console.group(...n)},groupEnd:function(){oe=Math.max(oe-Fe,0)},info:C.bind(globalThis.console,1),log:C.bind(globalThis.console,1),profile:function(){},table:function(n,t){return globalThis.console.warn("table not implemented",n,t)},time:function(){},timeEnd:function(n){return globalThis.console.warn("timeEnd not implemented",n)},timeLog:function(n){return globalThis.console.warn("timeLog not implemented",n)},timeStamp:function(){},trace:C.bind(globalThis.console,1),warn:C.bind(globalThis.console,2)};class ie{static BUFFER_SIZE=1024;constructor(t,o){if(this.constructor==ie)throw new Error(`${y}EdgioReadableStreamReader Abstract class cannot be instantiated directly.`);this[i]=t,this[U]=o,this[z]=!1}async read(){let t=new Uint8Array(this[U](this[i]));return this[z]=!0,{value:t}}}class dt extends ie{constructor(t){super(t,e.hostcall_resp_get_body)}}class pt extends ie{constructor(t){super(t,e.hostcall_req_get_body)}}class gt{constructor(t){this[i]=t}getReader(){return new dt(this[i])}}class _e{constructor(t){this[i]=t}getReader(){return new pt(this[i])}}class X{constructor(t,o,{appendFn:s,checkFn:a,getFn:f,keysFn:d,removeFn:_,setFn:m}){if(this.constructor==X)throw new Error(`${y}Headers Abstract class cannot be instantiated directly.`);if(this[i]=t,this[L]=s,this[V]=a,this[K]=f,this[ne]=d,this[Y]=_,this[je]=m,Array.isArray(o))o.forEach(p=>{if(!Array.isArray(p))throw new Error(`When passing an array of headers, each array element must be an array of length = 2. '${p}' is type '${typeof p}' not type array.`);if(p.length!==2)throw new Error(`When passing an array of headers, each array element must be an array of length = 2. '${p}' is array of length ${p.length}.`);e.hostcall_debug(`.append(${p})`),this.append(p[0],p[1])});else if(o&&o instanceof Headers){let p=o.getRaw();Object.keys(p).forEach(R=>{p[R].forEach(G=>{this.append(R,G)})})}else{if(o&&Function.prototype.toString.call(o.constructor).match(/class.*/))throw new Error(`'headers' must be a 'Headers' instance, dictionary, or an array of array pairs. Found ${Function.prototype.toString.call(o.constructor)}`);if(typeof o=="object")Object.keys(o).forEach(p=>{this.append(p,o[p])});else if(typeof o<"u")throw new Error(`'headers' must be a dictionary or an array of array pairs. Found type ${typeof o}.`)}}_validateName(t){if(t===void 0)throw new Error("The 'name' argument is required, but was not present.");if(typeof t!="string")throw new Error(`The 'name' argument must be a 'string' type, not a '${typeof t}' type.`);return t}_validateValue(t){if(t===void 0)throw new Error("The 'value' argument is required, but was not present.");if(typeof t!="string"&&!Array.isArray(t))throw new Error(`The 'value' argument must be a 'string' or 'array' type, not a '${typeof t}' type.`);return t}append(t,o){this[L](this[i],this._validateName(t),this._validateValue(o))}delete(t){this[Y](this[i],this._validateName(t))}entries(){let t=[];for(let o of this.keys())t.push([o,this.get(o)]);return t}forEach(t){for(let o of this.keys())t(this.get(o),o)}get(t){let o=this[K](this[i],this._validateName(t));return Array.isArray(o)?o.join(", "):typeof o>"u"?null:o}has(t){return this[V](this[i],this._validateName(t))}keys(){return this[ne](this[i])}set(t,o){this[je](this[i],this._validateName(t),this._validateValue(o))}values(){let t=[];for(let o of this.keys())t.push(this.get(o));return t}toJSON(){let t={};for(let o of this.keys())t[o]=this.get(o);return t}}class $e extends X{constructor(t,o){super(t,o,{appendFn:e.hostcall_resp_append_header,checkFn:e.hostcall_resp_check_header,getFn:e.hostcall_resp_get_header_values,keysFn:r.resp_get_header_names,removeFn:e.hostcall_resp_remove_header,setFn:e.hostcall_resp_set_header})}}class xe extends X{constructor(t,o){super(t,o,{appendFn:e.hostcall_req_append_header,checkFn:e.hostcall_req_check_header,getFn:e.hostcall_req_get_header_values,keysFn:r.req_get_header_names,removeFn:e.hostcall_req_remove_header,setFn:e.hostcall_req_set_header})}}class _t{constructor(){this._headers={}}appendFn=(t,o,s)=>{this._headers[o]||(this._headers[o]=[]),this._headers[o].push(s)};checkFn=(t,o)=>!!this._headers[o];getFn=(t,o)=>this._headers[o]?this._headers[o].join(", "):null;getRawFn=()=>this._headers;keysFn=t=>Object.keys(this._headers);removeFn=(t,o)=>{delete this._headers[o]};setFn=(t,o,s)=>{this._headers[o]=[s]}}globalThis.Headers=class extends X{constructor(t){let o=new _t;super(0,t,{appendFn:o.appendFn.bind(o),checkFn:o.checkFn.bind(o),getFn:o.getFn.bind(o),keysFn:o.keysFn.bind(o),removeFn:o.removeFn.bind(o),setFn:o.setFn.bind(o)}),this._headersInstance=o}getRaw=()=>this._headersInstance.getRawFn()},globalThis.Request=class{constructor(n,t){var f,d,_;if(this[h]=t||{},typeof((f=t==null?void 0:t.edgio)==null?void 0:f.id)=="number"){this[i]=(d=t==null?void 0:t.edgio)==null?void 0:d.id,this[M]=new xe(this[i]);return}if(typeof n!="string")throw new Error(`"string" type is accepted for the input parameter, not '${typeof n}'`);let o=n;if(this[h].method!==void 0&&typeof this[h].method!="string")throw new Error(`options.method must be type 'undefined' or 'string', not '${typeof this[h].method}'`);let s=this[h].method||"GET";this[i]=e.hostcall_req_create(s,o),this[M]=new xe(this[i],((_=this[h])==null?void 0:_.headers)||{});let a=this[h].body;if(delete this[h].body,this[T]=!1,a){if(s==="GET"||s==="HEAD")throw new Error("Request with GET/HEAD method cannot have body.");typeof a=="string"?(e.hostcall_debug(`new Request(${this[i]}, string: ${a})`),e.hostcall_req_set_body_from_string(this[i],a)):a instanceof ArrayBuffer?(e.hostcall_debug(`new Request(ArrayBuffer: len=${a.byteLength})`),e.hostcall_req_set_body_from_array_buffer(this[i],a)):ArrayBuffer.isView(a)?(e.hostcall_debug(`new Request(TypedArray: len=${a.byteLength})`),e.hostcall_req_set_body_from_array_buffer(this[i],a.buffer)):(e.hostcall_debug(`new Request(other: ${a.toString()})`),e.hostcall_req_set_body_from_string(this[i],a.toString()))}}async arrayBuffer(){let t=await new _e(this[i]).getReader().read();return t.done?new ArrayBuffer(0):(this[T]=!0,t.value.buffer)}blob(){throw new Error(`${y}The 'blob' method is not supported by the Request class.`)}get body(){return this.method==="GET"||this.method==="HEAD"?null:new _e(this[i])}get bodyUsed(){return this[T]}get cache(){throw new Error(`${y}The 'cache' property is not supported by the Request class.`)}get credentials(){throw new Error(`${y}The 'credentials' property is not supported by the Request class.`)}clone(){throw new Error(`${y}The 'clone' method is not supported by the Request class.`)}get destination(){throw new Error(`${y}The 'destination' property is not supported by the Request class.`)}formData(){throw new Error(`${y}The 'formData' method is not supported by the Request class.`)}get headers(){return this[M]}get integrity(){throw new Error(`${y}The 'integrity' property is not supported by the Request class.`)}async json(){return JSON.parse(await this.text())}get method(){return e.hostcall_req_get_method(this[i])}set method(n){return e.hostcall_req_set_method(this[i],n)}get mode(){throw new Error(`${y}The 'mode' property is not supported by the Request class.`)}get redirect(){throw new Error(`${y}The 'redirect' property is not supported by the Request class.`)}get referrer(){throw new Error(`${y}The 'referrer' property is not supported by the Request class.`)}get referrerPolicy(){throw new Error(`${y}The 'referrerPolicy' property is not supported by the Request class.`)}get signal(){throw new Error(`${y}The 'signal' property is not supported by the Request class.`)}async text(){let t=await new _e(this[i]).getReader().read();return t.done?"":(this[T]=!0,new TextDecoder(b).decode(t.value))}get url(){return e.hostcall_req_get_uri(this[i])}set url(n){return e.hostcall_req_set_uri(this[i],n)}get path(){return e.hostcall_req_get_path(this[i])}get edgioId(){return this[i]}toJSON(){return{method:this.method,url:this.url,headers:this.headers}}cloneWithoutBody(){let n=e.hostcall_req_clone_without_body(this[i]);return new Request(null,{edgio:{id:n}})}},globalThis.Response=class{constructor(n,t){var o,s,a;if(this[T]=!1,this[E]=!1,this[N]=!1,this[q]=null,typeof((o=t==null?void 0:t.edgio)==null?void 0:o.id)=="number"){this[i]=(s=t==null?void 0:t.edgio)==null?void 0:s.id,this[M]=new $e(this[i]),e.hostcall_debug(`_edgioNew Response: ${this[i]}`),this[E]=!0;return}if(t instanceof Response){let f=t.cloneWithoutBody();this[i]=f[i],this[Headers]=f[Headers],this[N]=f[N],this[q]=f[q]}else{if(this[h]=t||{},isNaN(this[h].status)&&(this[h].status=200),this[h].status<200||this[h].status>599||this[h].status===204||this[h].status===304)throw new Error(`The status provided ${this[h].status} must be >= 200 and <= 599, and not 204 or 304.`);this[i]=e.hostcall_resp_create(this[h].status),this[M]=new $e(this[i],((a=this[h])==null?void 0:a.headers)||{})}n&&(typeof n=="string"?(this[E]=!0,e.hostcall_debug(`new Response(string: ${n})`),e.hostcall_resp_set_body_from_string(this[i],n)):n instanceof ArrayBuffer?(this[E]=!0,e.hostcall_debug(`new Response(ArrayBuffer: len=${n.byteLength})`),e.hostcall_resp_set_body_from_array_buffer(this[i],n)):ArrayBuffer.isView(n)?(this[E]=!0,e.hostcall_debug(`new Response(TypedArray: len=${n.byteLength})`),e.hostcall_resp_set_body_from_array_buffer(this[i],n.buffer)):(this[E]=!0,e.hostcall_debug(`new Response(other: ${n.toString()})`),e.hostcall_resp_set_body_from_string(this[i],n.toString())))}async arrayBuffer(){if(this[E]){this[T]=!1;let n=await this.body.getReader().read();return n.done?new ArrayBuffer(0):n.value.buffer}return new ArrayBuffer(0)}blob(){throw new Error(`${y}The 'blob' method is not supported by the Response class.`)}get body(){return this[E]?new gt(this[i]):null}get bodyUsed(){return this[T]}clone(){throw new Error(`${y}The 'clone' method is not supported by the Response class.`)}formData(){throw new Error(`${y}The 'formData' method is not supported by the Response class.`)}get headers(){return this[M]}async json(){return JSON.parse(await this.text())}get ok(){let n=this.status;return n>=200&&n<300}static redirect(n,t){return new Response(void 0,{headers:{location:n},status:t||302})}set redirected(n){this[N]=n}get redirected(){return this[N]}get status(){return e.hostcall_resp_get_status(this[i])}get statusText(){return e.hostcall_resp_get_reason(this[i])}async text(){if(this[T]=!0,!this[E])return"";let n=await this.body.getReader().read();return new TextDecoder(b).decode(n.value)}get type(){throw new Error(`${y}The 'type' property is not supported by the Response class.`)}get url(){return this[q]}get edgioId(){return this[i]}toJSON(){return{status:this.status,statusText:this.statusText,headers:this.headers}}cloneWithoutBody(){let n=e.hostcall_resp_clone_without_body(this[i]),t=new Response(null,{edgio:{id:n}});return t[q]=this[q],t[N]=this[N],t}},globalThis.OpaqueRedirect=class extends globalThis.Response{constructor(n,t){super("",{edgio:{id:n}}),this[M]={append:()=>{},delete:()=>{},entries:()=>[],forEach:()=>{},get:()=>null,has:()=>!1,keys:()=>[],set:()=>{},values:()=>[]},this[q]=t}get ok(){return!1}get status(){return 0}};class yt extends Error{constructor(t){super(),this[B]=t}get code(){return this[B]}get message(){return e.hostcall_resp_get_error_code_message(this[B])}toString(){return`${this.message} (code: ${this.code})`}}function Q(n){let t={namespace:n};return new Proxy(t,{get(s,a){return a==="get"?function(f){return e.hostcall_dict_get(s.namespace,f)}:a==="getBase64Decoded"?function(f){return new Uint8Array(e.hostcall_dict_get_base64_decoded(s.namespace,f))}:a==="has"?function(f){return e.hostcall_dict_check(s.namespace,f)}:a==="keys"?function(){return r.dict_get_keys(s.namespace)}:e.hostcall_dict_get(s.namespace,a)},getOwnPropertyDescriptor(s,a){return{value:e.hostcall_dict_get(s.namespace,a),writable:!1,enumerable:!0,configurable:!0}},defineProperty(s,a,f){return!1},deleteProperty(s,a){return!1},has(s,a){return e.hostcall_dict_check(s.namespace,a)},ownKeys(s){return r.dict_get_keys(s.namespace)}})}class bt{constructor(t){this[D]=t}has(t){return e.hostcall_unique_set_check(this[D],t)}keys(){return r.unique_set_get_keys(this[D])}toJSON(){return this.keys()}}class mt{startTimer(t){return e.hostcall_metrics_start_timer(t)}stopTimer(t){return e.hostcall_metrics_stop_timer(t)}add(t,o){return e.hostcall_metrics_add(t,o)}}function De(n,t,o,...s){e.hostcall_metrics_add(n,1),e.hostcall_metrics_start_timer(t);try{return o(...s)}finally{e.hostcall_metrics_stop_timer(t)}}let wt=JSON.parse,St=JSON.stringify;globalThis.JSON={parse:(...n)=>De(1e3,1002,wt,...n),stringify:(...n)=>De(1001,1003,St,...n)},globalThis.module={},globalThis.__dirname="/",globalThis.__filename="/index.js",globalThis.global=globalThis,globalThis.TextDecoder=class{constructor(t){this[W]=t||b}get fatal(){return!1}set fatal(t){if(t)throw new Error("TextDecoder.fatal is not supported")}decode(t){if(!t)return"";let o=ArrayBuffer.isView(t)?t.buffer:t;if(!(o instanceof ArrayBuffer))throw new Error(`Decoding supported for ArrayBuffer, TypedArray and DataView, not ${typeof t}`);return r.text_decoder_decode(this[W],o)}};function Me(n){switch(typeof n){case"undefined":return"";case"string":return n;default:return n===null?"null":n.toString()}}globalThis.TextEncoder=class{constructor(){}encode(t){let o=Me(t);return typeof o!="string"?new Uint8Array(0):new Uint8Array(r.text_encoder_encode(o))}encodeInto(t,o){if(!(o instanceof Uint8Array))throw new Error("TextEncoder.encodeInto requires an Uint8Array");let s=Me(t);return o.byteLength===0||typeof s!="string"?{read:0,written:0}:r.text_encoder_encode_into(s,o)}get encoding(){return b}};let Z=!1,ae=null,ce=new Map,le=!1,Ce=0,ye=0;function Pe(n,t){if(n.length!==t)throw new Error(`Expected ${t} arguments, got ${n.length}`)}function Et(n,t){if(n.length<t)throw new Error(`Expected at least ${t} arguments, got ${n.length}`)}function Tt(n){return{environmentVars:n,origins:globalThis[k],requestVars:Q(S),geo:Q(A),device:Q(J),client:Q(j),metrics:new mt,respondWith:function(t){if(Pe(arguments,1),t instanceof Response){let o=t;e.hostcall_debug("sdk.js respondWith: got response object, handle synchronously and return"),e.hostcall_resp_send_to_client(o.edgioId),le=!0;return}e.hostcall_debug("sdk.js respondWith: resolving response promise"),Promise.resolve(t).then(o=>(e.hostcall_resp_send_to_client(o.edgioId),le=!0,o)).catch(o=>{throw le=!1,new Error("Failed to resolve respondWith promise: "+o)})},waitUntil:function(t){Pe(arguments,1),++Ce,Promise.resolve(t).then(o=>(++ye,o)).catch(o=>{throw++ye,new Error("Failed to resolve waitUntil promise: "+o)})}}}function Le(n){let t=n.split("="),o=t[0].trim(),s=t[1];return{key:o,value:s}}function Rt(n,t){let o={},s=n.headers.cookie;if(s){let d=s.split(";");for(let _=0;_<d.length;_++){let{key:m,value:p}=Le(d[_]);o[m]=p}}let a=t.headers.get("set-cookie")||[];Array.isArray(a)||(a=[a]);for(let d=0;d<a.length;d++){let{key:_,value:m}=Le(a[d].split(";")[0]);o[_]=m}let f=Object.keys(o);if(f.length>0){n.headers.cookie="";for(let d=0;d<f.length;d++){let _=f[d],m=o[_];n.headers.cookie+=`${_}=${m}${d<f.length-1?"; ":""}`}}}async function vt(n,t,o,s){let f=s.headers.get("location");if([301,302,303,307,308].indexOf(s.status)<0||!f)return s[q]=n,s.redirected=o>0,s;let d=t.redirect;if(d==="error")throw new Error("redirect");if(d==="manual")return new globalThis.OpaqueRedirect(s.edgioId,n);if(++o>5)throw new Error(`fetch(${n}) exceeded the limit of ${5} redirects.`);return Rt(t,s),await Ve(f,t,o)}async function Ve(n,t,o){let s;if(n instanceof Request)s=n;else{if(typeof n!="string"){if(typeof n.toString!="function"||n.toString()==="[object Object]")throw new Error('Invalid "url" argument in fetch() function. The "url" argument must be a string, a Request object, or an object where toString() returns the url.');n=n.toString()}s=new Request(n,t)}let a=t.edgio.origin;try{e.hostcall_req_set_fetch_origin(s.edgioId,a)}catch{throw new Error(`Invalid edgio.origin: "${a}". Must be one of: ${globalThis[k].keys().join(", ")}`)}if(t.edgio.timeout){let R=parseInt(t.edgio.timeout);if(isNaN(R))throw new Error("Invalid edgio.timeout specified. Expected timeout in milliseconds as an integer.");try{e.hostcall_req_set_fetch_timeout(s.edgioId,R)}catch{throw new Error("Failed to set fetch timeout on request.")}}e.hostcall_req_fetch_async(s.edgioId);let f,d,_=new Promise((R,G)=>{f=R,d=G});ce.set(s.edgioId,{promise:_,resolve:f,reject:d});let m=s.url,p=await _;return vt(m,t,o,p)}globalThis.fetch=async function(n,t){Et(arguments,1),t=t||{},t.redirect||(t.redirect="follow"),t.headers||(t.headers={}),t.edgio||(t.edgio={});let o=["error","follow","manual"];if(o.indexOf(t.redirect)<0)throw new Error(`redirect must be one of "${o.join(", ")}", not "${t.redirect}"`);if(!t.edgio.origin)throw new Error(`edgio.origin must be specified as a fetch option. Must be one of: ${globalThis[k].keys().join(",")}`);return Ve(n,t,0)};function At(n){let t=Q(v),o=t.__EDGE_FUNCTION_PATH__,s=u.get(o);if(!s)throw new Error(`No edge function found for path: ${o}`);function a(){return le&&ye>=Ce}globalThis[k]=new bt(O);let f=new Request(null,{edgio:{id:n}}),d=Tt(t),_=s().bind(globalThis)(f,d);for(;;){for(;!Z;)if(_ instanceof Promise&&(Z=!0,_.then(()=>{Z=!1}).catch(m=>{Z=!1,ae=m})),a()){e.hostcall_debug("breaking the loop - no more jobs (1)");return}if(e.hostcall_debug("Executing pending jobs..."),r.execute_pending(),ae){let m=ae;throw ae=null,m}if(ce.size===0){if(!Z)return}else{let[m,p,R]=e.hostcall_resp_await_next();e.hostcall_debug(`sdk.js->hostcall_resp_await_next: is_response(${m}), req_id(${p}), resp_id_or_err_code(${R})`);let G=ce.get(p);if(!G)throw new Error(`No pending fetch for ID ${p}`);ce.delete(p);let{resolve:It,reject:Ot}=G;if(m){e.hostcall_debug("sdk.js: creating Response");let be=new Response(null,{edgio:{id:R}});It(be)}else{e.hostcall_debug("sdk.js: creating ResponseError");let be=new yt(R);Ot(be)}}if(a()){e.hostcall_debug("breaking the loop - no more jobs (2)");return}}}At(l)}});module.exports=function(e,r){let l=new Map([['./functions/home.js',function() {
          const edgeFunctionsDefaultExport = require("/Users/howie.ross/Repos/hross-ef-big-pic/functions/home.js").handleHttpRequest;
          return edgeFunctionsDefaultExport
        }]]);ut()(e,r,l)};
//# sourceMappingURL=edgeFunctionsIndexCodeTemplate.js.map
